const Web3 = require("web3");
const fs = require("fs");

const web3 = new Web3("http://127.0.0.1:7545"); // Ganache default RPC

const abi = JSON.parse(fs.readFileSync("./contractABI.json")); // Replace with your ABI
const bytecode = "6080604052348015600f57600080fd5b50336000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506105b58061005f6000396000f3fe608060405234801561001057600080fd5b50600436106100415760003560e01c806312f38fdb146100465780638f32d59b146100785780638fa8486314610096575b600080fd5b610060600480360381019061005b91906103a7565b6100c6565b60405161006f939291906103ed565b60405180910390f35b610080610178565b60405161008d919061043f565b60405180910390f35b6100b060048036038101906100ab9190610486565b6101cf565b6040516100bd919061043f565b60405180910390f35b60008060008060001b600160008681526020019081526020016000206000015403610126576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161011d90610536565b60405180910390fd5b6001600085815260200190815260200160002060010154600160008681526020019081526020016000206002015460016000878152602001908152602001600020600301549250925092509193909250565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614905090565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614610271573373ffffffffffffffffffffffffffffffffffffffff167fdccef964d1af084fd6d690c3e5aade13287909d74c30e0ff5d9ae3366cf5945760405160405180910390a260009050610365565b6000801b6001600086815260200190815260200160002060000154146102c757837fe985e5fe8cfa4bd92061e7c93fcae8b43b582687f09618ae3af237cf492aecf260405160405180910390a260009050610365565b6040518060800160405280858152602001848152602001838152602001428152506001600086815260200190815260200160002060008201518160000155602082015181600101556040820151816002015560608201518160030155905050837f957b8095981d8253140d194b1c3e5b1eb080682b8b80e0727cb0f966901b9e318484604051610358929190610556565b60405180910390a2600190505b9392505050565b600080fd5b6000819050919050565b61038481610371565b811461038f57600080fd5b50565b6000813590506103a18161037b565b92915050565b6000602082840312156103bd576103bc61036c565b5b60006103cb84828501610392565b91505092915050565b6000819050919050565b6103e7816103d4565b82525050565b600060608201905061040260008301866103de565b61040f60208301856103de565b61041c60408301846103de565b949350505050565b60008115159050919050565b61043981610424565b82525050565b60006020820190506104546000830184610430565b92915050565b610463816103d4565b811461046e57600080fd5b50565b6000813590506104808161045a565b92915050565b60008060006060848603121561049f5761049e61036c565b5b60006104ad86828701610392565b93505060206104be86828701610471565b92505060406104cf86828701610471565b9150509250925092565b600082825260208201905092915050565b7f652d6365727469666963617465204e4f54206578697374210000000000000000600082015250565b60006105206018836104d9565b915061052b826104ea565b602082019050919050565b6000602082019050818103600083015261054f81610513565b9050919050565b600060408201905061056b60008301856103de565b61057860208301846103de565b939250505056fea2646970667358221220f0e82c0358e8bdbde53039e6d50c69cab210e33108bd7c27c2d6345dd237d0b464736f6c634300081a0033"; // Replace with your compiled contract's bytecode

async function deployContract() {
    const accounts = await web3.eth.getAccounts(); // Get accounts from Ganache
    const contract = new web3.eth.Contract(abi);

    const deployedContract = await contract
        .deploy({ data: bytecode })
        .send({ from: accounts[0], gas: 3000000 }); // Deploy with the first account

    console.log("Contract deployed at:", deployedContract.options.address);
}

deployContract();
